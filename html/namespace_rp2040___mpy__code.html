<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lab_2_Digitales_3: Referencia del espacio de nombres Rp2040_Mpy_code</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lab_2_Digitales_3
   </div>
   <div id="projectbrief">Caracterizar un motor</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespace_rp2040___mpy__code.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Funciones</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Referencia del espacio de nombres Rp2040_Mpy_code</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Funciones</h2></td></tr>
<tr class="memitem:a4c7821aff92658a81ecb4cdd7a5caafe" id="r_a4c7821aff92658a81ecb4cdd7a5caafe"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c7821aff92658a81ecb4cdd7a5caafe">medir_pulso</a> (Pin pin)</td></tr>
<tr class="separator:a4c7821aff92658a81ecb4cdd7a5caafe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a9d8d2bc8620cd9b957b346e68edd0" id="r_ac0a9d8d2bc8620cd9b957b346e68edd0"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0a9d8d2bc8620cd9b957b346e68edd0">ejecutar_captura</a> (int paso_pwm)</td></tr>
<tr class="separator:ac0a9d8d2bc8620cd9b957b346e68edd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92ebbfc6d1cbea46267b19be838a2438" id="r_a92ebbfc6d1cbea46267b19be838a2438"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a92ebbfc6d1cbea46267b19be838a2438">modo_manual</a> (int pwm_val)</td></tr>
<tr class="separator:a92ebbfc6d1cbea46267b19be838a2438"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad48434a9a75e3283602f56ce7d34d249" id="r_ad48434a9a75e3283602f56ce7d34d249"><td class="memItemLeft" align="right" valign="top"><a id="ad48434a9a75e3283602f56ce7d34d249" name="ad48434a9a75e3283602f56ce7d34d249"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ENCODER_HUECOS</b> = 20</td></tr>
<tr class="separator:ad48434a9a75e3283602f56ce7d34d249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a859c9591890c8c81199bc891cc44d31f" id="r_a859c9591890c8c81199bc891cc44d31f"><td class="memItemLeft" align="right" valign="top"><a id="a859c9591890c8c81199bc891cc44d31f" name="a859c9591890c8c81199bc891cc44d31f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>SECTORS_REV</b> = ENCODER_HUECOS * 2</td></tr>
<tr class="separator:a859c9591890c8c81199bc891cc44d31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0765a20f653731d13c790012335be3e" id="r_af0765a20f653731d13c790012335be3e"><td class="memItemLeft" align="right" valign="top"><a id="af0765a20f653731d13c790012335be3e" name="af0765a20f653731d13c790012335be3e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>RPM_CONST_US</b> = 60_000_000 // SECTORS_REV</td></tr>
<tr class="separator:af0765a20f653731d13c790012335be3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374d5af76d6503ed2603832a2c7c9dc2" id="r_a374d5af76d6503ed2603832a2c7c9dc2"><td class="memItemLeft" align="right" valign="top"><a id="a374d5af76d6503ed2603832a2c7c9dc2" name="a374d5af76d6503ed2603832a2c7c9dc2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_DT_US</b> = 100</td></tr>
<tr class="separator:a374d5af76d6503ed2603832a2c7c9dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a85de10c01518cd358b6c74ee4fe07" id="r_af1a85de10c01518cd358b6c74ee4fe07"><td class="memItemLeft" align="right" valign="top"><a id="af1a85de10c01518cd358b6c74ee4fe07" name="af1a85de10c01518cd358b6c74ee4fe07"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>PWM_FREQ_HZ</b> = 100_000</td></tr>
<tr class="separator:af1a85de10c01518cd358b6c74ee4fe07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f1ac947733402c31442fb71201c39f5" id="r_a8f1ac947733402c31442fb71201c39f5"><td class="memItemLeft" align="right" valign="top"><a id="a8f1ac947733402c31442fb71201c39f5" name="a8f1ac947733402c31442fb71201c39f5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>TIEMPO_ENTRE_ESCALONES</b> = 2_000</td></tr>
<tr class="separator:a8f1ac947733402c31442fb71201c39f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6959bb642a06a7b56c6fd83effa923f" id="r_ac6959bb642a06a7b56c6fd83effa923f"><td class="memItemLeft" align="right" valign="top"><a id="ac6959bb642a06a7b56c6fd83effa923f" name="ac6959bb642a06a7b56c6fd83effa923f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>REPORT_INTERVALO_MS</b> = 500</td></tr>
<tr class="separator:ac6959bb642a06a7b56c6fd83effa923f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eaf5610adb206b89c412b23ee2fbbd1" id="r_a8eaf5610adb206b89c412b23ee2fbbd1"><td class="memItemLeft" align="right" valign="top"><a id="a8eaf5610adb206b89c412b23ee2fbbd1" name="a8eaf5610adb206b89c412b23ee2fbbd1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>pwm_pin</b> = PWM(Pin(3))</td></tr>
<tr class="separator:a8eaf5610adb206b89c412b23ee2fbbd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace76ff518196599f6cd587eb004d0ebe" id="r_ace76ff518196599f6cd587eb004d0ebe"><td class="memItemLeft" align="right" valign="top"><a id="ace76ff518196599f6cd587eb004d0ebe" name="ace76ff518196599f6cd587eb004d0ebe"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>sensor_pin</b> = Pin(5, Pin.IN, Pin.PULL_UP)</td></tr>
<tr class="separator:ace76ff518196599f6cd587eb004d0ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f2e29ec69332dad9c51fd0a28acf2a" id="r_a66f2e29ec69332dad9c51fd0a28acf2a"><td class="memItemLeft" align="right" valign="top"><a id="a66f2e29ec69332dad9c51fd0a28acf2a" name="a66f2e29ec69332dad9c51fd0a28acf2a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>high_start_us</b> = None</td></tr>
<tr class="separator:a66f2e29ec69332dad9c51fd0a28acf2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed8f048c2acdb6bf516684bcd9920f9e" id="r_aed8f048c2acdb6bf516684bcd9920f9e"><td class="memItemLeft" align="right" valign="top"><a id="aed8f048c2acdb6bf516684bcd9920f9e" name="aed8f048c2acdb6bf516684bcd9920f9e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>rpm_global</b> = 0.0</td></tr>
<tr class="separator:aed8f048c2acdb6bf516684bcd9920f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9b6dbfe797aa2a11e9a07242dc26bb" id="r_acc9b6dbfe797aa2a11e9a07242dc26bb"><td class="memItemLeft" align="right" valign="top"><a id="acc9b6dbfe797aa2a11e9a07242dc26bb" name="acc9b6dbfe797aa2a11e9a07242dc26bb"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>modo_captura</b> = False</td></tr>
<tr class="separator:acc9b6dbfe797aa2a11e9a07242dc26bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4bfea90952cec63c3f16007609a223e" id="r_aa4bfea90952cec63c3f16007609a223e"><td class="memItemLeft" align="right" valign="top"><a id="aa4bfea90952cec63c3f16007609a223e" name="aa4bfea90952cec63c3f16007609a223e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>pwm_manual</b> = 0</td></tr>
<tr class="separator:aa4bfea90952cec63c3f16007609a223e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325d38ee8149e1f85744867a528e4ce2" id="r_a325d38ee8149e1f85744867a528e4ce2"><td class="memItemLeft" align="right" valign="top"><a id="a325d38ee8149e1f85744867a528e4ce2" name="a325d38ee8149e1f85744867a528e4ce2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>trigger</b></td></tr>
<tr class="separator:a325d38ee8149e1f85744867a528e4ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58923a352202d712f14988a54429ba79" id="r_a58923a352202d712f14988a54429ba79"><td class="memItemLeft" align="right" valign="top"><a id="a58923a352202d712f14988a54429ba79" name="a58923a352202d712f14988a54429ba79"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>handler</b></td></tr>
<tr class="separator:a58923a352202d712f14988a54429ba79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c0333388840b9483a3e6f66e92bd7a" id="r_ad5c0333388840b9483a3e6f66e92bd7a"><td class="memItemLeft" align="right" valign="top"><a id="ad5c0333388840b9483a3e6f66e92bd7a" name="ad5c0333388840b9483a3e6f66e92bd7a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cmd</b> = input(&quot;&gt;&gt; &quot;).strip()</td></tr>
<tr class="separator:ad5c0333388840b9483a3e6f66e92bd7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e65432428ff8fc24edbc321f06f6ee" id="r_a06e65432428ff8fc24edbc321f06f6ee"><td class="memItemLeft" align="right" valign="top"><a id="a06e65432428ff8fc24edbc321f06f6ee" name="a06e65432428ff8fc24edbc321f06f6ee"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>partes</b> = cmd.split()</td></tr>
<tr class="separator:a06e65432428ff8fc24edbc321f06f6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce0180dca6d11b4e5ea66cd38d640f1" id="r_a4ce0180dca6d11b4e5ea66cd38d640f1"><td class="memItemLeft" align="right" valign="top"><a id="a4ce0180dca6d11b4e5ea66cd38d640f1" name="a4ce0180dca6d11b4e5ea66cd38d640f1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>paso</b> = int(partes[1])</td></tr>
<tr class="separator:a4ce0180dca6d11b4e5ea66cd38d640f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f378cbc86f515191a1d76054719a45" id="r_a33f378cbc86f515191a1d76054719a45"><td class="memItemLeft" align="right" valign="top"><a id="a33f378cbc86f515191a1d76054719a45" name="a33f378cbc86f515191a1d76054719a45"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>val</b> = int(partes[1])</td></tr>
<tr class="separator:a33f378cbc86f515191a1d76054719a45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<div class="textblock"><pre class="fragment">/**
 * @file    encoder_rpm_logger.py
 * @brief   Medición de RPM con RP2040 usando un disco encoder y generación de
 *          señal PWM para caracterización de motor.
 *
 * El script:
 *   - Configura un pin PWM para excitar el motor a 100 kHz.
 *   - Usa interrupciones para medir el tiempo en alto de cada sector del
 *     disco encoder y convertirlo en RPM.
 *   - Permite dos modos:
 *       1.  **Captura automática**: barrido de PWM con registro CSV.
 *       2.  **Manual**: aplica un ciclo PWM fijo y muestra la RPM en consola.
 *
 * Comandos de consola:
 *   - `START &lt;paso&gt;`  Inicia la captura automática con incrementos de &lt;paso&gt; %.
 *   - `PWM &lt;valor&gt;`   Activa el modo manual con un PWM constante (0–100 %).
 *   - `EXIT`          Detiene el PWM y sale.
 *
 * @author  Miguel Angel Alvarez Guzman
 * @date    2025‑05‑04
 */
</pre> </div><h2 class="groupheader">Documentación de funciones</h2>
<a id="ac0a9d8d2bc8620cd9b957b346e68edd0" name="ac0a9d8d2bc8620cd9b957b346e68edd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a9d8d2bc8620cd9b957b346e68edd0">&#9670;&#160;</a></span>ejecutar_captura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Rp2040_Mpy_code.ejecutar_captura </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>paso_pwm</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">/**
 * @brief  Barrido automático de PWM y registro de datos en CSV.
 *
 * Genera una rampa ascendente y otra descendente de @c 0 % → @c 100 %
 * (paso @p paso_pwm) aplicando cada valor durante
 * `TIEMPO_ENTRE_ESCALONES` ms.  Se crea un archivo CSV con columnas:
 * `Tiempo_ms, PWM_porcentaje, RPM`.
 *
 * @param paso_pwm  Incremento/decremento porcentual (1–99).
 */
</pre> 
</div>
</div>
<a id="a4c7821aff92658a81ecb4cdd7a5caafe" name="a4c7821aff92658a81ecb4cdd7a5caafe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c7821aff92658a81ecb4cdd7a5caafe">&#9670;&#160;</a></span>medir_pulso()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Rp2040_Mpy_code.medir_pulso </td>
          <td>(</td>
          <td class="paramtype">Pin</td>          <td class="paramname"><span class="paramname"><em>pin</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">/**
 * @brief  Interrupción en flancos del sensor.
 *
 *  * **Flanco de subida (LOW→HIGH)**: almacena el instante en que empieza
 *    el sector opaco (pulso alto).
 *  * **Flanco de bajada (HIGH→LOW)**: computa la duración del pulso alto
 *    (∆t) y, si supera el antirrebote, actualiza la variable global
 *    `rpm_global` con el valor de RPM correspondiente.
 *
 * @param pin  Objeto `machine.Pin` que generó la interrupción.
 * @note       Se asume que el disco tiene @c SECTORS_REV sectores por
 *             revolución, de modo que un pulso corresponde a 1 /
 *             `SECTORS_REV` de vuelta.
 */
</pre> 
</div>
</div>
<a id="a92ebbfc6d1cbea46267b19be838a2438" name="a92ebbfc6d1cbea46267b19be838a2438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92ebbfc6d1cbea46267b19be838a2438">&#9670;&#160;</a></span>modo_manual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None Rp2040_Mpy_code.modo_manual </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>pwm_val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">/**
 * @brief  Modo manual: aplica un PWM fijo y muestra la RPM periódicamente.
 *
 * @param pwm_val  Ciclo de trabajo en porcentaje (0–100 %).
 * @note  Presione **Ctrl‑C** para salir y desactivar el PWM.
 */
</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_rp2040___mpy__code.html">Rp2040_Mpy_code</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
